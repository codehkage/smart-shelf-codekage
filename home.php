<?php include 'include/navigation/sidebar.php';  ?>
		<div id="content">

			<nav class="navbar navbar-default">
				<div class="container-fluid">
					<div class="navbar-header">
						<div class="pull-left">
							<p class="nav-drawer" id="sidebarCollapse"><span class="sidemenu"></span></p>
							<span class="brand-text">SmartShelf</span>		
						</div>
						<div class="pull-right">
							<a href="search.php" rel="external"><span class="search pull-left"><i class="fa fa-search search"></i></span></a>
							<span class="more-options"></i></span>
						</div>						
					</div>
				</div>	
			</nav>
	<div class="overlay">
			<div class="details package">
			<div id="myModal" class="modal fade" role="dialog">
				  <div class="modal-dialog">

				    <!-- Modal content-->
				    <div class="modal-content" style="padding: 10px;">
				      <div class="modal-header">
				        <button type="button" class="close popupDelete" id="" data-dismiss="modal">&times;</button>
				        <h4 class="modal-title">Package Details</h4>
				      </div>
				      <div class="modal-body">
				        <div class="package_details">
						
						</div>
				      </div>
				      <div class="modal-footer">
				        <button type="button" class="btn btn-default popupDelete" id="" data-dismiss="modal">Close</button>
				      </div>
				    </div>

				  </div>
				</div>
			</div>
			
			<div class="details Course_Material">
			<div id="myModal1" class="modal fade" role="dialog">
				  <div class="modal-dialog">

				    <!-- Modal content-->
				    <div class="modal-content" style="padding: 10px;">
				      <div class="modal-header">
				        <button type="button" class="close popupDelete" id="" data-dismiss="modal">&times;</button>
				        <h4 class="modal-title">Course Material Details</h4>
				      </div>
				      <div class="modal-body">
				        <div class="Course_Material_details">
						
						</div>
				      </div>
				      <div class="modal-footer">
				        <button type="button" class="btn btn-default popupDelete" id="" data-dismiss="modal">Close</button>
				      </div>
				    </div>

				  </div>
				</div>
			</div>
			<div class="details IT_Report">
				<div id="myModal2" class="modal fade" role="dialog">
				  <div class="modal-dialog">

				    <!-- Modal content-->
				    <div class="modal-content" style="padding: 10px;">
				      <div class="modal-header">
				        <button type="button" class="close popupDelete" id="" data-dismiss="modal">&times;</button>
				        <h4 class="modal-title">IT_Report Details</h4>
				      </div>
				      <div class="modal-body">
				        <div class="IT_Report_details">
						
						</div>
				      </div>
				      <div class="modal-footer">
				        <button type="button" class="btn btn-default popupDelete" id="" data-dismiss="modal">Close</button>
				      </div>
				    </div>

				  </div>
				</div>
			</div>

			<div class="details Project_Work">
				<div id="myModal3" class="modal fade" role="dialog">
				  <div class="modal-dialog">

				    <!-- Modal content-->
				    <div class="modal-content" style="padding: 10px;">
				      <div class="modal-header">
				        <button type="button" class="close popupDelete" id="" data-dismiss="modal">&times;</button>
				        <h4 class="modal-title">Project_Work Details</h4>
				      </div>
				      <div class="modal-body">
				        <div class="Project_Works">
						
						</div>
				      </div>
				      <div class="modal-footer">
				        <button type="button" class="btn btn-default popupDelete" id="" data-dismiss="modal">Close</button>
				      </div>
				    </div>

				  </div>
				</div>
			</div>
			<div class="details GraduatePackage">
				<div id="myModal4" class="modal fade" role="dialog">
				  <div class="modal-dialog">

				    <!-- Modal content-->
				    <div class="modal-content" style="padding: 10px;">
				      <div class="modal-header">
				        <button type="button" class="close popupDelete" id="" data-dismiss="modal">&times;</button>
				        <h4 class="modal-title">Post Graduate Package Details</h4>
				      </div>
				      <div class="modal-body">
				        <div class="Graduate_Package">
						
						</div>
				      </div>
				      <div class="modal-footer">
				        <button type="button" class="btn btn-default popupDelete" id="" data-dismiss="modal">Close</button>
				      </div>
				    </div>

				  </div>
				</div>
			</div>
			<div class="details Course_Material">
				<div id="myModal5" class="modal fade" role="dialog">
				  <div class="modal-dialog">

				    <!-- Modal content-->
				    <div class="modal-content" style="padding: 10px;">
				      <div class="modal-header">
				        <button type="button" class="close popupDelete" id="" data-dismiss="modal">&times;</button>
				        <h4 class="modal-title">Post Graduate Course_Material Details</h4>
				      </div>
				      <div class="modal-body">
				        <div class="Course_Materials">
						
						</div>
				      </div>
				      <div class="modal-footer">
				        <button type="button" class="btn btn-default popupDelete" id="" data-dismiss="modal">Close</button>
				      </div>
				    </div>

				  </div>
				</div>
			</div>
			<div class="details Project_Work">
				<div id="myModal6" class="modal fade" role="dialog">
				  <div class="modal-dialog">

				    <!-- Modal content-->
				    <div class="modal-content" style="padding: 10px;">
				      <div class="modal-header">
				        <button type="button" class="close popupDelete" id="" data-dismiss="modal">&times;</button>
				        <h4 class="modal-title">Post Graduate Course_Material Details</h4>
				      </div>
				      <div class="modal-body">
				        <div class="Project_Works">
						
						</div>
				      </div>
				      <div class="modal-footer">
				        <button type="button" class="btn btn-default popupDelete" id="" data-dismiss="modal">Close</button>
				      </div>
				    </div>

				  </div>
				</div>
			</div>
			<div class="details textbook">
				<div id="myModal7" class="modal fade" role="dialog">
				  <div class="modal-dialog">

				    <!-- Modal content-->
				    <div class="modal-content" style="padding: 10px;">
				      <div class="modal-header">
				        <button type="button" class="close popupDelete" id="" data-dismiss="modal">&times;</button>
				        <h4 class="modal-title">Text Book Details</h4>
				      </div>
				      <div class="modal-body">
				        <div class="textbooks">
						
						</div>
				      </div>
				      <div class="modal-footer">
				        <button type="button" class="btn btn-default popupDelete" id="" data-dismiss="modal">Close</button>
				      </div>
				    </div>

				  </div>
				</div>
			</div>
			<div class="details publication">
				<div id="myModal8" class="modal fade" role="dialog">
				  <div class="modal-dialog">

				    <!-- Modal content-->
				    <div class="modal-content" style="padding: 10px;">
				      <div class="modal-header">
				        <button type="button" class="close popupDelete" id="" data-dismiss="modal">&times;</button>
				        <h4 class="modal-title">Publication Details</h4>
				      </div>
				      <div class="modal-body">
				        <div class="publications">
						
						</div>
				      </div>
				      <div class="modal-footer">
				        <button type="button" class="btn btn-default popupDelete" id="" data-dismiss="modal">Close</button>
				      </div>
				    </div>

				  </div>
				</div>
			</div>
			<div class="tab-wrapper">
				<ul id="optionTab" class="nav nav-tabs">
					<li class="active"><a href="#undergraduate" style="background:#1d2d42;">UNDERGRADUATE</a></li>
					<li><a href="#postgraduate">POSTGRADUATE</a></li>		
					<li><a href="#textbook">TEXTBOOKS</a></li>
					<li><a href="#techicalpaper"> PUBLICATION</a></li>
					<li><a href="#mustread">MOST READ</a></li>	
				</ul>
			</div>
	
			<div id="myTabContent" class="tab-content">
				<div class="tab-pane fade active in" id="undergraduate">
				<!-- <a href="uploads\educational_books\awsgsg-swh.pdf" id="link" rel="external">Book</a> -->
					<span style="font-size: 20px;padding: 15px;">Packages</span>
					<div id="package" class="over">
							
					</div>
					<span style="font-size: 20px;padding: 15px;">Class Note</span>
					<div id="class_note" class="over">
							
					</div>
					<span style="font-size: 20px;padding: 15px;">Course Material</span>
					<div id="course_material" class="over">
							
					</div>
					<span style="font-size: 20px;padding: 15px;">IT Report</span>
					<div id="it_report" class="over">
							
					</div>
					<span style="font-size: 20px;padding: 15px;">Project Work</span>
					<div id="project_work" class="over">
							
					</div>
				</div>

				<div class="tab-pane fade" id="postgraduate">
				<span style="font-size: 20px;padding: 15px;">Post Graduate Packages</span>
					<div id="postgraduate">
						<div id="postgraduate_package" class="over">

						</div>
						<span style="font-size: 20px;padding: 15px;">Course Material</span>
						<div id="postgraduate_course_material" class="over">
							
						</div>
							<span style="font-size: 20px;padding: 15px;">Project Work</span>
						<div id="postgraduate_project_work" class="over">
							
						</div>
					</div>
				</div>
				<div class="tab-pane fade" id="textbook">
					<div id="text-book">
						<div id="text_books" class="over">

						</div>
					</div>									
				</div>
				<div class="tab-pane fade" id="techicalpaper">
					<div id="publication">
						<div id="publications" class="over">

						</div>
					</div>							
				</div>
				</div>

			<script type="text/javascript" src="assets/js/jquery-2.2.3.min.js"></script>
			<script type="text/javascript" src="assets/js/page/home.js"></script>
			<script type="text/javascript" src="assets/js/bootstrap-3.3.7.min.js"></script>
			<script type="text/javascript" src="assets/js/scripts.js"></script>
			<script type="text/javascript" src="assets/js/vendor/paystack.js"></script>

			<noscript>
				<style type="text/css">
				body {
					display: none ;
					visibility: none;
				}
			</style>
			<META HTTP-EQUIV="Refresh" CONTENT="0;URL=https://play.google.com/store/apps/details?id=com.danielobasi.smartbooks">
		</noscript>
		<style>
		.details{
	width: 100%;
    /*background: white;*/
    /*text-align: center;*/
    /*margin: auto;
    height: 500px;
    padding: 21px;
    z-index: 1;
    position: absolute;
    display: none;*/
		}
		</style>
	</body>
	</html>
<script>
  function payWithPaystack(){
						var email = $("#btn-downloadbook").attr("email");
						var price = $("#btn-downloadbook").attr("price");
						var phone = $('.phone').val();
						// alert(price);
						    var handler = PaystackPop.setup({
						      key: 'pk_test_0d82aa4c8cc3c05f4c41bb5dbdde0df13b6cb9cc',
						      email: email,
						      amount: price,
						      metadata: {
						         custom_fields: [
						            {
						                display_name: "Mobile Number",
						                variable_name: "mobile_number",
						                value: phone
						            }
						         ]
						      },
						      callback: function(response){
						          alert('success. transaction ref is ' + response.reference);
						        },
						      onClose: function(){
						          alert('window closed');
						      }
						    });
						    handler.openIframe();
	}
 $(document).ajaxComplete(function(){
 	$("#btn-downloadbook").click(function(){
 			var price2 = $(this).attr("price");
 			var pdf = $(this).attr("book");
 			var book ="dashboard/"+pdf;
 			// alert(book);
                      if (price2 == "Free"){
                      	alert("kk");
					    var indexedDB = window.indexedDB || window.webkitIndexedDB || window.mozIndexedDB || window.OIndexedDB || window.msIndexedDB,
					        IDBTransaction = window.IDBTransaction || window.webkitIDBTransaction || window.OIDBTransaction || window.msIDBTransaction,
					        dbVersion = 1.0;

					    // Create/open database
					    var request = indexedDB.open("SmartShelfApp", dbVersion),
					        db,
					        createObjectStore = function (dataBase) {
					            // Create an objectStore
					            console.log("Creating objectStore");
					            dataBase.createObjectStore("Download");
					            // alert("good");
					        }
					    getFile = function () {
				            // Create XHR
				            var xhr = new XMLHttpRequest(),
				                blob;

				            xhr.open("GET",book, true);
				            // Set the responseType to blob
				            xhr.responseType = "blob";
				            xhr.addEventListener("load", function () {
				                if (xhr.status === 200) {
				                    console.log("File retrived");
				                    
				                    // Blob as response
				                    blob = xhr.response;
				                    console.log("Blob:" + blob);

				                    // Put the received blob into IndexedDB
				                    putFile(blob);
				                }
				            }, false);
				            // Send XHR
				            xhr.send();
				        }
				        	   putFile = function (blob) {
						            console.log("Putting Books in IndexedDB");

						            // Open a transaction to the database
						            var readWriteMode = typeof IDBTransaction.READ_WRITE == "undefined" ? "readwrite" : IDBTransaction.READ_WRITE;
						            var transaction = db.transaction(["Download"], readWriteMode);

						            // Put the blob into the dabase
						            var put = transaction.objectStore("Download").put(blob, "pdf");

						            // Retrieve the file that was just stored
							            transaction.objectStore("Download").get("pdf").onsuccess = function (event) {
						                var imgFile = event.target.result;
						                console.log("Got books!" + imgFile);

						                // Get window.URL object
						                var URL = window.URL || window.webkitURL;

						                // Create and revoke ObjectURL
						                var imgURL = URL.createObjectURL(imgFile);

						                // Set img src to ObjectURL
						                var imgElephant = document.getElementById("link");
						                imgElephant.setAttribute("href",imgURL);

						                // Revoking ObjectURL
						                imgElephant.onload = function() {
						                    window.URL.revokeObjectURL(this.href);
						                }
						            };
						        };
						        request.onerror = function (event) {
							        console.log("Error creating/accessing IndexedDB database");
							    };

							    request.onsuccess = function (event) {
							        console.log("Success creating/accessing IndexedDB database");
							        db = request.result;

							        db.onerror = function (event) {
							            console.log("Error creating/accessing IndexedDB database");
							        };
							        
							        // Interim solution for Google Chrome to create an objectStore. Will be deprecated
							        if (db.setVersion) {
							            if (db.version != dbVersion) {
							                var setVersion = db.setVersion(dbVersion);
							                setVersion.onsuccess = function () {
							                    createObjectStore(db);
							                    getFile();
							                };
							            }
							            else {
							                getFile();
							            }
							        }
							        else {
							            getFile();
							        }
							    }
							    
							    // For future use. Currently only in latest Firefox versions
							    request.onupgradeneeded = function (event) {
							        createObjectStore(event.target.result);
							    };

							}
                      else
                      {
                      	swal({
                        title: "Procced Payment",
                        // text: "great",
                        type: "success",
                        showCancelButton: false,
                        closeOnConfirm: true,
                        showLoaderOnConfirm: false,
                      	})
                      	payWithPaystack();
                      }
           });
    });
</script>